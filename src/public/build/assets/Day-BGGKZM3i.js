import{p as C,r as a,x as T,c as E,w as j,a as u,b as y,h as B,d as l,t as F,y as v,k as R,o as $}from"./app-oKiCCnFa.js";import{A as V}from"./AuthenticatedLayout-B0mCR-y7.js";import{F as G,_ as I,a as N,l as U,i as W,b as L}from"./ScheduleModal-Bvv07V_D.js";import{i as O}from"./index-SXSujxm7.js";import{d as n}from"./dayjs.min-Dun-lqIM.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BEaRJJwb.js";import"./Footer-DodseqVY.js";import"./Modal-Bx8CoXnf.js";const q={class:"py-8 bg-gray-50 dark:bg-gray-900 min-h-screen"},z={class:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8"},H={class:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4"},J={class:"text-3xl font-bold text-gray-800 dark:text-gray-100 tracking-tight"},K={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},Q={class:"p-6"},X={class:"calendar-container"},Z={__name:"Day",setup(ee){n.locale("ja");const{props:c}=C(),s=a(c.events||[]),g=a(c.residents||[]),_=a(c.scheduleTypes||[]),r=a(c.currentDate||n().format("YYYY-MM-DD")),o=a(null);T(()=>c.events,e=>{e&&(s.value=e,o.value&&o.value.getApi().refetchEvents())},{deep:!0});const d=a(!1),h=a(null),f=a(null),p=a(!1),m=a(null),x=e=>{const t=n(e.start).format("YYYY-MM-DD"),i=n(r.value).format("YYYY-MM-DD");t!==i&&v.get(route("calendar.day",{date:t}),{},{preserveState:!0,preserveScroll:!0})},k=e=>{var i;const t=(i=e.jsEvent)==null?void 0:i.target;t&&t.closest(".fc-event")||(h.value=n(e.date).format("YYYY-MM-DD"),f.value=null,d.value=!0)},Y=e=>{d.value=!1,m.value=e.event,p.value=!0},b=R(()=>({plugins:[W,O,L],initialView:"timeGridDay",locale:U,headerToolbar:{left:"prev,next today",center:"title",right:"customMonth,customWeek,timeGridDay"},customButtons:{customMonth:{text:"月",click:()=>{v.get(route("calendar.index"),{date:r.value})}},customWeek:{text:"週",click:()=>{v.get(route("calendar.week"),{date:r.value})}}},buttonText:{today:"今日",month:"月",week:"週",day:"日"},events:s.value,eventDisplay:"block",height:"auto",editable:!1,selectable:!1,dateClick:k,eventClick:Y,slotMinTime:"06:00:00",slotMaxTime:"22:00:00",slotDuration:"00:30:00",initialDate:r.value,allDaySlot:!1})),w=e=>{console.log("handleScheduleCreated called (Day)",e),e&&(s.value=[...s.value,e],console.log("Added new event to events.value:",s.value.length),o.value&&o.value.getApi().refetchEvents())},M=()=>{d.value=!1,h.value=null,f.value=null},S=()=>{v.reload({only:["events"]})},A=e=>{console.log("handleScheduleDeleted called (Day)",e),D(),e&&(s.value=s.value.filter(t=>t.id!==e),console.log("Removed deleted event from events.value:",s.value.length),o.value&&o.value.getApi().refetchEvents())},D=()=>{p.value=!1,m.value=null};return(e,t)=>($(),E(V,null,{default:j(()=>[u(y(B),{title:"日間カレンダー"}),l("div",q,[l("div",z,[l("div",H,[l("div",null,[l("h1",J," 日間カレンダー - "+F(y(n)(r.value).format("YYYY年MM月DD日")),1),t[0]||(t[0]=l("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"1日の詳細スケジュールを確認できます",-1))])]),l("div",K,[l("div",Q,[l("div",X,[u(y(G),{ref_key:"calendarRef",ref:o,options:b.value,onDatesSet:x},null,8,["options"])])])])])]),u(I,{show:d.value,"initial-date":h.value,"initial-resident-id":f.value,residents:g.value,"schedule-types":_.value,onClose:M,onSuccess:w},null,8,["show","initial-date","initial-resident-id","residents","schedule-types"]),u(N,{show:p.value,schedule:m.value,residents:g.value,"schedule-types":_.value,onClose:D,onUpdated:S,onDeleted:A},null,8,["show","schedule","residents","schedule-types"])]),_:1}))}},ue=P(Z,[["__scopeId","data-v-c9045a3f"]]);export{ue as default};

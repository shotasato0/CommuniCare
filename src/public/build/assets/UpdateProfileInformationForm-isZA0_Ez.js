import{u as $,g as u,d as e,t as i,a as o,w as y,o as d,i as v,I as S,b as t,j as I,m as U,F as B,l as E,f as F,e as M,r as j,k as q}from"./app-oKiCCnFa.js";import{_ as m,a as c,b as _}from"./TextInput-Cd2Bt45R.js";import{P as D}from"./PrimaryButton-D0hJQABf.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},C={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},T={key:0,class:"bg-green-100 dark:bg-green-900 border-l-4 border-green-500 dark:border-green-400 text-green-700 dark:text-green-100 p-4 m-2 rounded fixed bottom-10 left-1/2 transform -translate-x-1/2 z-50 w-full max-w-md mx-auto sm:rounded-lg shadow-lg"},L={class:"font-bold text-center"},z={class:"relative w-24 h-24 group"},A=["src"],O=["value"],G={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},H={value:"",disabled:"",selected:""},J=["value"],K={class:"text-sm text-gray-600 dark:text-gray-400 mt-2"},Q={__name:"UpdateProfileInformationForm",props:{user:{type:Object,required:!0},mustVerifyEmail:{type:Boolean},status:{type:String},units:{type:Array,required:!0},successMessage:{type:String,default:null}},emits:["openIconEdit"],setup(b,{emit:k}){const p=b,w=k,g=q(()=>p.successMessage),n=p.user,x=p.units,a=$({name:n.name,username_id:n.username_id,tel:n.tel||"",email:n.email||"",unit_id:n.unit_id?String(n.unit_id):"",_token:document.querySelector('meta[name="csrf-token"]').getAttribute("content")}),f=j(!1),h=()=>{a.patch(route("profile.update"),{onSuccess:()=>{f.value=!0,setTimeout(()=>{f.value=!1},8e3)}})},V=()=>{w("openIconEdit")};return(r,l)=>(d(),u("section",null,[e("header",null,[e("h2",P,i(r.$t("Profile Information")),1),e("p",C,i(r.$t("Update your account's profile information.")),1)]),o(S,{"enter-active-class":"transition ease-in-out duration-300","enter-from-class":"opacity-0 transform translate-y-2","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition ease-in-out duration-300","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform translate-y-2"},{default:y(()=>[f.value||g.value?(d(),u("div",T,[e("p",L,i(g.value||r.$t("Saved.")),1)])):v("",!0)]),_:1}),e("form",{onSubmit:M(h,["prevent"]),class:"mt-6 space-y-6"},[e("div",z,[e("button",{type:"button",onClick:V,class:"absolute inset-0 w-24 h-24 flex items-center justify-center bg-transparent text-white p-1 rounded-ful transition-opacity duration-300",title:"プロフィール画像を編集"},[e("img",{src:t(n).iconUrl||"/images/default_user_icon.png",alt:"ユーザーのプロフィール写真",class:"w-full h-full rounded-full object-cover transition-opacity duration-300 group-hover:opacity-70",onError:l[0]||(l[0]=s=>s.target.src="/images/default_user_icon.png")},null,40,A),l[6]||(l[6]=e("div",{class:"absolute bottom-0 right-0 bg-gray-800 dark:bg-gray-600 text-white p-1 rounded-full",title:"プロフィール画像を編集"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487a2.25 2.25 0 113.182 3.182L7.529 20.183a4.5 4.5 0 01-1.691 1.09l-4.013 1.337 1.337-4.013a4.5 4.5 0 011.09-1.691L16.862 4.487z"})])],-1))])]),e("input",{type:"hidden",name:"_token",value:t(a)._token},null,8,O),e("div",null,[o(m,{for:"name",value:r.$t("Name")},null,8,["value"]),o(c,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:t(a).name,"onUpdate:modelValue":l[1]||(l[1]=s=>t(a).name=s),required:"",autocomplete:"name",placeholder:"例: 山田太郎"},null,8,["modelValue"]),o(_,{class:"mt-2",message:t(a).errors.name},null,8,["message"])]),e("div",null,[o(m,{for:"username_id",value:r.$t("Username_ID")},null,8,["value"]),o(c,{id:"username_id",type:"text",class:"mt-1 block w-full",modelValue:t(a).username_id,"onUpdate:modelValue":l[2]||(l[2]=s=>t(a).username_id=s),required:"",placeholder:"任意の英数字（255文字以内）"},null,8,["modelValue"]),o(_,{class:"mt-2",message:t(a).errors.username_id},null,8,["message"]),t(n).guest_session_id?(d(),u("p",G," ゲストユーザーではこのIDは使用されません。通常ログインで使用されるIDです。 ")):v("",!0)]),e("div",null,[o(m,{for:"tel",value:r.$t("Tel")},null,8,["value"]),o(c,{id:"tel",type:"text",class:"mt-1 block w-full",modelValue:t(a).tel,"onUpdate:modelValue":l[3]||(l[3]=s=>t(a).tel=s),placeholder:"例: 090-1234-5678（任意）"},null,8,["modelValue"])]),e("div",null,[o(m,{for:"email",value:r.$t("Email")},null,8,["value"]),o(c,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:t(a).email,"onUpdate:modelValue":l[4]||(l[4]=s=>t(a).email=s),placeholder:"例: example@example.com（任意）"},null,8,["modelValue"])]),e("div",null,[o(m,{for:"unit_id",value:r.$t("Unit")},null,8,["value"]),I(e("select",{"onUpdate:modelValue":l[5]||(l[5]=s=>t(a).unit_id=s),id:"unit_id",class:"w-full border border-gray-300 dark:border-gray-600 p-2 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"},[e("option",H,i(r.$t("Select your unit")),1),(d(!0),u(B,null,E(t(x),s=>(d(),u("option",{key:s.id,value:s.id},i(s.name),9,J))),128))],512),[[U,t(a).unit_id]]),e("p",K,i(r.$t("By setting your unit, you can access the forum.")),1)]),e("div",null,[e("div",null,[o(D,{disabled:t(a).processing},{default:y(()=>[F(i(r.$t("Save")),1)]),_:1},8,["disabled"])])])],32)]))}},Z=N(Q,[["__scopeId","data-v-9508f89b"]]);export{Z as default};

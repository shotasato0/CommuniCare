import{z as A,M as P,o as g,g as y,d as e,s as C,j as M,J as B,a as h,w,n as d,I as q,r as m,k as L,c as G,b as v,q as J,y as N,t as s,i as $,x as Q,m as R,e as I,f as H,F as K,p as W}from"./app-oKiCCnFa.js";import{A as X}from"./ApplicationLogo-BEaRJJwb.js";import{F as Y}from"./Footer-DodseqVY.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"relative"},te={__name:"Dropdown",props:{align:{type:String,default:"right"},width:{type:String,default:"48"},contentClasses:{type:String,default:"py-1 bg-white dark:bg-gray-800"}},setup(c){const o=c,i=a=>{n.value&&a.key==="Escape"&&(n.value=!1)};A(()=>document.addEventListener("keydown",i)),P(()=>document.removeEventListener("keydown",i));const u=L(()=>({48:"w-48"})[o.width.toString()]),k=L(()=>o.align==="left"?"ltr:origin-top-left rtl:origin-top-right start-0":o.align==="right"?"ltr:origin-top-right rtl:origin-top-left end-0":"origin-top"),n=m(!1);return(a,l)=>(g(),y("div",ee,[e("div",{onClick:l[0]||(l[0]=p=>n.value=!n.value)},[C(a.$slots,"trigger")]),M(e("div",{class:"fixed inset-0 z-40",onClick:l[1]||(l[1]=p=>n.value=!1)},null,512),[[B,n.value]]),h(q,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:w(()=>[M(e("div",{class:d(["absolute z-50 mt-2 rounded-md shadow-lg",[u.value,k.value]]),style:{display:"none"},onClick:l[2]||(l[2]=p=>n.value=!1)},[e("div",{class:d(["rounded-md ring-1 ring-black ring-opacity-5",c.contentClasses])},[C(a.$slots,"content")],2)],2),[[B,n.value]])]),_:3})]))}},re={__name:"DropdownLink",props:{href:{type:String,required:!0}},setup(c){return(o,i)=>(g(),G(v(J),{href:c.href,class:"block w-full px-4 py-2 text-start text-sm leading-5 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-700 transition duration-150 ease-in-out"},{default:w(()=>[C(o.$slots,"default")]),_:3},8,["href"]))}},oe=async(c,o,i,u="forum.index",k)=>{try{const n=await fetch("/user-forum-id",{headers:{Accept:"application/json"}}),a=await n.json();if(!n.ok)throw new Error(a.error||"Failed to fetch forum ID");const l=a.forum_id||null;if(i){const p=c.find(f=>f.id===i),b=o.filter(f=>f.unit_id===i);p&&(sessionStorage.setItem("selectedUnitUsers",JSON.stringify(b)),sessionStorage.setItem("selectedUnitName",p.name),localStorage.setItem("lastSelectedUnitId",i))}else console.warn("User does not belong to a unit.");l?N.get(route(u,{forum_id:l,active_unit_id:i}),{preserveState:!1}):console.warn("Forum ID not found. Navigation skipped.")}catch(n){console.error("Error fetching user forum ID:",n),k({message:n.message})}},ae={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 dark:bg-black dark:bg-opacity-70",style:{"z-index":"1000"}},se={class:"bg-white dark:bg-gray-800 p-6 rounded-md shadow-lg"},ne={class:"text-gray-900 dark:text-gray-100"},ie={class:"flex justify-center space-x-2 mt-4"},de={__name:"CustomDialog",props:{isVisible:Boolean,message:String,showProfileLink:Boolean},emits:["confirm","cancel"],setup(c,{emit:o}){const i=o,u=()=>{i("confirm")},k=()=>{i("cancel")},n=()=>{N.get(route("profile.edit"))};return(a,l)=>c.isVisible?(g(),y("div",ae,[e("div",se,[e("p",ne,s(c.message),1),e("div",ie,[c.showProfileLink?$("",!0):(g(),y("button",{key:0,onClick:u,class:"w-32 bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 font-medium py-2 px-4 rounded-md transition hover:bg-blue-300 dark:hover:bg-blue-600 hover:text-white focus:outline-none focus:shadow-outline"}," OK ")),c.showProfileLink?(g(),y("button",{key:1,onClick:n,class:"w-40 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-100 font-medium py-2 px-4 rounded-md transition hover:bg-green-300 dark:hover:bg-green-600 hover:text-white focus:outline-none focus:shadow-outline"}," アカウント情報へ ")):$("",!0),e("button",{onClick:k,class:"w-32 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium py-2 px-4 rounded-md transition hover:bg-gray-500 dark:hover:bg-gray-500 hover:text-white focus:outline-none focus:shadow-outline"}," キャンセル ")])])])):$("",!0)}},le={class:"flex items-center space-x-2"},ue={value:"system"},ge={value:"light"},ce={value:"dark"},be={class:"text-gray-500 dark:text-gray-400"},fe={key:0,class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},ye={key:1,class:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},T={__name:"DarkModeToggle",setup(c){const o=m("system"),i=m("light");let u=null;const k=L(()=>["text-sm","rounded-md","px-2","py-1","bg-white","dark:bg-gray-800","border","border-gray-300","dark:border-gray-600","text-gray-700","dark:text-gray-300","focus:outline-none","focus:ring-2","focus:ring-blue-500"].join(" ")),n=()=>{if(o.value==="system"){const b=u?u.matches:!1;i.value=b?"dark":"light"}else i.value=o.value},a=()=>{n(),typeof document<"u"&&(i.value==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"))},l=()=>{typeof localStorage<"u"&&localStorage.setItem("theme-mode",o.value),a()},p=()=>{o.value==="system"&&a()};return A(()=>{typeof window<"u"&&(u=window.matchMedia("(prefers-color-scheme: dark)"),u.addEventListener("change",p));const b=(typeof localStorage<"u"?localStorage.getItem("theme-mode"):null)||"system";o.value=b,a()}),P(()=>{u&&u.removeEventListener("change",p)}),Q(o,a),(b,f)=>(g(),y("div",le,[M(e("select",{"onUpdate:modelValue":f[0]||(f[0]=_=>o.value=_),onChange:l,class:d(k.value)},[e("option",ue,s(b.$t("System")),1),e("option",ge,s(b.$t("Light")),1),e("option",ce,s(b.$t("Dark")),1)],34),[[R,o.value]]),e("div",be,[i.value==="dark"?(g(),y("svg",fe,[...f[1]||(f[1]=[e("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"},null,-1)])])):(g(),y("svg",ye,[...f[2]||(f[2]=[e("path",{"fill-rule":"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z","clip-rule":"evenodd"},null,-1)])]))])]))}},pe={class:"min-h-screen bg-gray-100 dark:bg-gray-900 pb-16"},me={class:"bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 fixed top-0 left-0 w-full z-10"},ke={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},he={class:"flex justify-between h-16"},ve={class:"flex"},xe={class:"shrink-0 flex items-center"},we={class:"hidden lg:flex space-x-8 -my-px ms-10"},$e={class:"hidden lg:flex lg:items-center"},Ce={class:"mr-4"},_e={key:0,class:"hidden xl:block text-gray-500 dark:text-gray-400 mr-4 px-3 py-1 bg-gray-100 dark:bg-gray-700 rounded-md text-sm font-medium"},Se={class:"relative"},Me={class:"inline-flex rounded-md"},Le={type:"button",class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-gray-500 dark:text-gray-300 bg-white dark:bg-gray-800 hover:text-gray-700 dark:hover:text-gray-100 focus:outline-none transition ease-in-out duration-150"},De={key:0},ze={key:1},Fe=["action"],Ee=["value"],Ve={class:"flex items-center lg:hidden my-auto"},je={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},Be={class:"pt-2 pb-3 space-y-2"},Ie={class:"pt-2 pb-3 space-y-2"},Te={class:"px-1 py-2"},Ae={class:"flex items-center space-x-2"},Pe={class:"text-gray-500 dark:text-gray-300 text-lg font-medium"},Ne={key:0,class:"bg-white dark:bg-gray-800 shadow mt-16"},Oe={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},Ue={class:"mt-16"},qe={__name:"AuthenticatedLayout",setup(c){var V,j;const o=W(),i=o.props.units||[],u=o.props.users||[],k=o.props.isGuest||!1,n=m(((V=document.querySelector('meta[name="csrf-token"]'))==null?void 0:V.getAttribute("content"))||""),a=m(!1),l=o.props.auth||{user:{}},p=((j=l.user)==null?void 0:j.unit_id)||null,b=m(!1),f=m(""),_=m(null),O=({message:t,onConfirm:r})=>{f.value=t,_.value=r,b.value=!0},D=()=>{b.value=!1},S=()=>{oe(i,u,p,"forum.index",O)},z=m(null),F=async t=>{var r,x;t.preventDefault(),!((r=l.user)!=null&&r.guest_session_id&&!window.confirm("ログアウトするとゲストユーザーが削除されます。本当にログアウトしてよろしいですか？"))&&((x=z.value)==null||x.submit())},E=m(window.location.pathname==="/forum");return(t,r)=>{var x;return g(),y(K,null,[e("div",null,[e("div",pe,[e("nav",me,[e("div",ke,[e("div",he,[e("div",ve,[e("div",xe,[e("div",{onClick:S,class:"cursor-pointer"},[h(X,{class:"block h-6 sm:h-8 w-auto fill-current text-blue-900"})])]),e("div",we,[e("div",{onClick:I(S,["prevent"]),class:d(["inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium leading-5 cursor-pointer whitespace-nowrap",E.value?"text-blue-500 dark:text-blue-400 border-blue-500 dark:border-blue-400 focus:outline-none focus:border-blue-700 dark:focus:border-blue-300":"text-gray-500 dark:text-gray-300 border-transparent hover:text-gray-700 dark:hover:text-gray-100 hover:border-gray-300 dark:hover:border-gray-500"])},s(t.$t("Forum")),3),e("div",{class:d(["inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium leading-5 cursor-pointer whitespace-nowrap",t.route().current("users.index")?"text-blue-500 dark:text-blue-400 border-blue-500 dark:border-blue-400 focus:outline-none focus:border-blue-700 dark:focus:border-blue-300":"text-gray-500 dark:text-gray-300 border-transparent hover:text-gray-700 dark:hover:text-gray-100 hover:border-gray-300 dark:hover:border-gray-500"]),onClick:r[0]||(r[0]=()=>t.$inertia.get(t.route("users.index")))},s(t.$t("Staff")),3),e("div",{class:d(["inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium leading-5 cursor-pointer whitespace-nowrap",t.route().current("residents.index")?"text-blue-500 dark:text-blue-400 border-blue-500 dark:border-blue-400 focus:outline-none focus:border-blue-700 dark:focus:border-blue-300":"text-gray-500 dark:text-gray-300 border-transparent hover:text-gray-700 dark:hover:text-gray-100 hover:border-gray-300 dark:hover:border-gray-500"]),onClick:r[1]||(r[1]=()=>t.$inertia.get(t.route("residents.index")))},s(t.$t("Residents")),3),e("div",{class:d(["inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium leading-5 cursor-pointer whitespace-nowrap",t.route().current("calendar.*")?"text-blue-500 dark:text-blue-400 border-blue-500 dark:border-blue-400 focus:outline-none focus:border-blue-700 dark:focus:border-blue-300":"text-gray-500 dark:text-gray-300 border-transparent hover:text-gray-700 dark:hover:text-gray-100 hover:border-gray-300 dark:hover:border-gray-500"]),onClick:r[2]||(r[2]=()=>t.$inertia.get(t.route("calendar.index")))},s(t.$t("Calendar")),3),e("div",{class:d(["inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium leading-5 cursor-pointer whitespace-nowrap",t.route().current("dashboard")?"text-blue-500 dark:text-blue-400 border-blue-500 dark:border-blue-400 focus:outline-none focus:border-blue-700 dark:focus:border-blue-300":"text-gray-500 dark:text-gray-300 border-transparent hover:text-gray-700 dark:hover:text-gray-100 hover:border-gray-300 dark:hover:border-gray-500"]),onClick:r[3]||(r[3]=()=>t.$inertia.get(t.route("dashboard")))},s(t.$t("Dashboard")),3)])]),e("div",$e,[e("div",Ce,[h(T)]),(x=v(o).props.tenant)!=null&&x.business_name?(g(),y("div",_e,s(v(o).props.tenant.business_name),1)):$("",!0),e("div",Se,[h(te,{align:"right",width:"48"},{trigger:w(()=>[e("span",Me,[e("button",Le,[v(l).user?(g(),y("span",De,s(v(l).user.name),1)):(g(),y("span",ze," ゲスト ")),r[10]||(r[10]=e("svg",{class:"ms-2 -me-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1))])])]),content:w(()=>[h(re,{href:t.route("profile.edit")},{default:w(()=>[H(s(t.$t("Profile")),1)]),_:1},8,["href"]),e("form",{ref_key:"logoutForm",ref:z,action:v(k)?t.route("logout-guest"):t.route("logout"),method:"post",class:"inline"},[e("input",{type:"hidden",name:"_token",value:n.value},null,8,Ee),e("button",{type:"submit",class:"block w-full text-left px-4 py-2 text-sm leading-5 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-700 transition duration-150 ease-in-out",onClick:F},s(t.$t("Log Out")),1)],8,Fe)]),_:1})])]),e("div",Ve,[e("button",{onClick:r[4]||(r[4]=U=>a.value=!a.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 dark:text-gray-300 hover:text-gray-500 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-700 focus:text-gray-500 dark:focus:text-gray-100 transition duration-150 ease-in-out"},[(g(),y("svg",je,[e("path",{class:d({hidden:a.value,"inline-flex":!a.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),e("path",{class:d({hidden:!a.value,"inline-flex":a.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),e("div",{class:d([{block:a.value,hidden:!a.value},"lg:hidden"])},[e("div",Be,[e("div",{onClick:I(S,["prevent"]),class:d(["block px-1 py-2 text-lg font-medium leading-5 cursor-pointer whitespace-nowrap transition duration-150 ease-in-out",E.value?"bg-indigo-100 dark:bg-indigo-900 text-blue-500 dark:text-blue-400 border-l-4 border-blue-500 dark:border-blue-400 focus:outline-none":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:text-gray-700 dark:focus:text-gray-100 focus:bg-gray-100 dark:focus:bg-gray-700"])},s(t.$t("Forum")),3),e("div",{onClick:r[5]||(r[5]=()=>t.$inertia.get(t.route("users.index"))),class:d(["block px-1 py-2 text-lg font-medium leading-5 cursor-pointer whitespace-nowrap transition duration-150 ease-in-out",t.route().current("users.index")?"bg-indigo-100 dark:bg-indigo-900 text-blue-500 dark:text-blue-400 border-l-4 border-blue-500 dark:border-blue-400 focus:outline-none":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:text-gray-700 dark:focus:text-gray-100 focus:bg-gray-100 dark:focus:bg-gray-700"])},s(t.$t("Staff")),3),e("div",{onClick:r[6]||(r[6]=()=>t.$inertia.get(t.route("residents.index"))),class:d(["block px-1 py-2 text-lg font-medium leading-5 cursor-pointer whitespace-nowrap transition duration-150 ease-in-out",t.route().current("residents.index")?"bg-indigo-100 dark:bg-indigo-900 text-blue-500 dark:text-blue-400 border-l-4 border-blue-500 dark:border-blue-400 focus:outline-none":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:text-gray-700 dark:focus:text-gray-100 focus:bg-gray-100 dark:focus:bg-gray-700"])},s(t.$t("Residents")),3),e("div",{onClick:r[7]||(r[7]=()=>t.$inertia.get(t.route("calendar.index"))),class:d(["block px-1 py-2 text-lg font-medium leading-5 cursor-pointer whitespace-nowrap transition duration-150 ease-in-out",t.route().current("calendar.*")?"bg-indigo-100 dark:bg-indigo-900 text-blue-500 dark:text-blue-400 border-l-4 border-blue-500 dark:border-blue-400 focus:outline-none":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:text-gray-700 dark:focus:text-gray-100 focus:bg-gray-100 dark:focus:bg-gray-700"])},s(t.$t("Calendar")),3),e("div",{onClick:r[8]||(r[8]=()=>t.$inertia.get(t.route("dashboard"))),class:d(["block px-1 py-2 text-lg font-medium leading-5 cursor-pointer whitespace-nowrap transition duration-150 ease-in-out",t.route().current("dashboard")?"bg-indigo-100 dark:bg-indigo-900 text-blue-500 dark:text-blue-400 border-l-4 border-blue-500 dark:border-blue-400 focus:outline-none":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:text-gray-700 dark:focus:text-gray-100 focus:bg-gray-100 dark:focus:bg-gray-700"])},s(t.$t("Dashboard")),3)]),e("div",Ie,[e("div",Te,[e("div",Ae,[e("span",Pe,s(t.$t("Theme")),1),h(T)])]),e("div",{onClick:r[9]||(r[9]=()=>t.$inertia.get(t.route("profile.edit"))),class:d(["block px-1 py-2 text-lg font-medium leading-5 cursor-pointer whitespace-nowrap transition duration-150 ease-in-out",t.route().current("profile.edit")?"bg-indigo-100 dark:bg-indigo-900 text-blue-500 dark:text-blue-400 border-l-4 border-blue-500 dark:border-blue-400 focus:outline-none":"text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:text-gray-700 dark:focus:text-gray-100 focus:bg-gray-100 dark:focus:bg-gray-700"])},s(t.$t("Profile")),3),e("div",{onClick:F,class:d(["block px-1 py-2 text-lg font-medium leading-5 cursor-pointer whitespace-nowrap transition duration-150 ease-in-out","text-gray-500 dark:text-gray-300 hover:text-gray-700 dark:hover:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:text-gray-700 dark:focus:text-gray-100 focus:bg-gray-100 dark:focus:bg-gray-700"])},s(t.$t("Log Out")),1)])],2)]),t.$slots.header?(g(),y("header",Ne,[e("div",Oe,[C(t.$slots,"header",{},void 0,!0)])])):$("",!0),e("main",Ue,[C(t.$slots,"default",{},void 0,!0)])]),h(Y)]),h(de,{isVisible:b.value,message:f.value,onConfirm:[_.value,D],showProfileLink:!0,onCancel:D},null,8,["isVisible","message","onConfirm"])],64)}}},He=Z(qe,[["__scopeId","data-v-4882b594"]]);export{He as A,de as _,oe as r};

import{p as O,r as a,x as T,c as E,w as F,a as i,b as x,h as j,d as l,y as u,k as B,o as R}from"./app-oKiCCnFa.js";import{A as $}from"./AuthenticatedLayout-B0mCR-y7.js";import{F as V,_ as G,a as I,l as N,i as U,b as H}from"./ScheduleModal-Bvv07V_D.js";import{i as L}from"./index-SXSujxm7.js";import{d as o}from"./dayjs.min-Dun-lqIM.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BEaRJJwb.js";import"./Footer-DodseqVY.js";import"./Modal-Bx8CoXnf.js";const q={class:"py-8 bg-gray-50 dark:bg-gray-900 min-h-screen"},z={class:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8"},J={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},K={class:"p-6"},Q={class:"calendar-container"},X={__name:"Week",setup(Z){o.locale("ja");const{props:n}=O(),s=a(n.events||[]),p=a(n.residents||[]),k=a(n.scheduleTypes||[]),y=a(n.currentDate||o().format("YYYY-MM-DD")),D=a(n.startOfWeek||o().startOf("week").add(1,"day").format("YYYY-MM-DD"));a(n.endOfWeek||o().endOf("week").add(1,"day").format("YYYY-MM-DD"));const r=a(null);T(()=>n.events,e=>{e&&(s.value=e,r.value&&r.value.getApi().refetchEvents())},{deep:!0});const d=a(!1),v=a(null),f=a(null),m=a(!1),h=a(null),_=e=>{const t=o(e.start).format("YYYY-MM-DD"),c=o(D.value).format("YYYY-MM-DD");o(e.start).startOf("week").add(1,"day").format("YYYY-MM-DD")!==c&&u.get(route("calendar.week"),{date:t},{preserveState:!0,preserveScroll:!0})},Y=e=>{var c;const t=(c=e.jsEvent)==null?void 0:c.target;t&&t.closest(".fc-event")||(v.value=o(e.date).format("YYYY-MM-DD"),f.value=null,d.value=!0)},w=e=>{d.value=!1,h.value=e.event,m.value=!0},M=B(()=>({plugins:[U,L,H],initialView:"timeGridWeek",locale:N,headerToolbar:{left:"prev,next today",center:"title",right:"customMonth,timeGridWeek,customDay"},customButtons:{customMonth:{text:"月",click:()=>{u.get(route("calendar.index"),{date:y.value})}},customDay:{text:"日",click:()=>{u.get(route("calendar.day"),{date:y.value})}}},buttonText:{today:"今日",month:"月",week:"週",day:"日"},events:s.value,eventDisplay:"block",height:"auto",editable:!1,selectable:!1,dateClick:Y,eventClick:w,slotMinTime:"06:00:00",slotMaxTime:"22:00:00",slotDuration:"00:30:00",firstDay:1,allDaySlot:!1,dayHeaderFormat:{weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}})),b=e=>{console.log("handleScheduleCreated called (Week)",e),e&&(s.value=[...s.value,e],console.log("Added new event to events.value:",s.value.length),r.value&&r.value.getApi().refetchEvents())},S=()=>{d.value=!1,v.value=null,f.value=null},A=()=>{u.reload({only:["events"]})},C=e=>{console.log("handleScheduleDeleted called (Week)",e),g(),e&&(s.value=s.value.filter(t=>t.id!==e),console.log("Removed deleted event from events.value:",s.value.length),r.value&&r.value.getApi().refetchEvents())},g=()=>{m.value=!1,h.value=null};return(e,t)=>(R(),E($,null,{default:F(()=>[i(x(j),{title:"週間カレンダー"}),l("div",q,[l("div",z,[t[0]||(t[0]=l("div",{class:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4"},[l("div",null,[l("h1",{class:"text-3xl font-bold text-gray-800 dark:text-gray-100 tracking-tight"},"週間カレンダー"),l("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"週ごとのスケジュールを確認できます")])],-1)),l("div",J,[l("div",K,[l("div",Q,[i(x(V),{ref_key:"calendarRef",ref:r,options:M.value,onDatesSet:_},null,8,["options"])])])])])]),i(G,{show:d.value,"initial-date":v.value,"initial-resident-id":f.value,residents:p.value,"schedule-types":k.value,onClose:S,onSuccess:b},null,8,["show","initial-date","initial-resident-id","residents","schedule-types"]),i(I,{show:m.value,schedule:h.value,residents:p.value,"schedule-types":k.value,onClose:g,onUpdated:A,onDeleted:C},null,8,["show","schedule","residents","schedule-types"])]),_:1}))}},ce=P(X,[["__scopeId","data-v-acb8fa45"]]);export{ce as default};

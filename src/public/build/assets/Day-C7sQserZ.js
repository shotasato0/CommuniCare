import{l as C,r as a,q as T,h as E,c as j,w as B,o as F,a as u,u as y,m as R,b as l,t as W,W as v}from"./app-BGfmsnWH.js";import{A as $}from"./AuthenticatedLayout-CUiVAEbY.js";import{F as V,_ as G,a as I,i as N,b as U,l as q}from"./ScheduleModal-BSs6fQ5q.js";import{i as L}from"./index-D-dfTXd0.js";import{d as o}from"./dayjs.min-BfedqCIq.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BvExYBVO.js";import"./Footer-C77glWd_.js";import"./Modal-BcYjMljY.js";const z={class:"py-8 bg-gray-50 dark:bg-gray-900 min-h-screen"},H={class:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8"},J={class:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4"},K={class:"text-3xl font-bold text-gray-800 dark:text-gray-100 tracking-tight"},P={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},Q={class:"p-6"},X={class:"calendar-container"},Z={__name:"Day",setup(ee){o.locale("ja");const{props:c}=C(),s=a(c.events||[]),g=a(c.residents||[]),D=a(c.scheduleTypes||[]),r=a(c.currentDate||o().format("YYYY-MM-DD")),n=a(null);T(()=>c.events,e=>{e&&(s.value=e,n.value&&n.value.getApi().refetchEvents())},{deep:!0});const d=a(!1),h=a(null),f=a(null),m=a(!1),p=a(null),x=e=>{const t=o(e.start).format("YYYY-MM-DD"),i=o(r.value).format("YYYY-MM-DD");t!==i&&v.get(route("calendar.day",{date:t}),{},{preserveState:!0,preserveScroll:!0})},k=e=>{var i;const t=(i=e.jsEvent)==null?void 0:i.target;t&&t.closest(".fc-event")||(h.value=o(e.date).format("YYYY-MM-DD"),f.value=null,d.value=!0)},Y=e=>{d.value=!1,p.value=e.event,m.value=!0},b=E(()=>({plugins:[N,L,U],initialView:"timeGridDay",locale:q,headerToolbar:{left:"prev,next today",center:"title",right:"customMonth,customWeek,timeGridDay"},customButtons:{customMonth:{text:"月",click:()=>{v.get(route("calendar.index"),{date:r.value})}},customWeek:{text:"週",click:()=>{v.get(route("calendar.week"),{date:r.value})}}},buttonText:{today:"今日",month:"月",week:"週",day:"日"},events:s.value,eventDisplay:"block",height:"auto",editable:!1,selectable:!1,dateClick:k,eventClick:Y,slotMinTime:"06:00:00",slotMaxTime:"22:00:00",slotDuration:"00:30:00",initialDate:r.value,allDaySlot:!1})),w=e=>{console.log("handleScheduleCreated called (Day)",e),e&&(s.value=[...s.value,e],console.log("Added new event to events.value:",s.value.length),n.value&&n.value.getApi().refetchEvents())},M=()=>{d.value=!1,h.value=null,f.value=null},S=()=>{v.reload({only:["events"]})},A=e=>{console.log("handleScheduleDeleted called (Day)",e),_(),e&&(s.value=s.value.filter(t=>t.id!==e),console.log("Removed deleted event from events.value:",s.value.length),n.value&&n.value.getApi().refetchEvents())},_=()=>{m.value=!1,p.value=null};return(e,t)=>(F(),j($,null,{default:B(()=>[u(y(R),{title:"日間カレンダー"}),l("div",z,[l("div",H,[l("div",J,[l("div",null,[l("h1",K," 日間カレンダー - "+W(y(o)(r.value).format("YYYY年MM月DD日")),1),t[0]||(t[0]=l("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"1日の詳細スケジュールを確認できます",-1))])]),l("div",P,[l("div",Q,[l("div",X,[u(y(V),{ref_key:"calendarRef",ref:n,options:b.value,onDatesSet:x},null,8,["options"])])])])])]),u(G,{show:d.value,"initial-date":h.value,"initial-resident-id":f.value,residents:g.value,"schedule-types":D.value,onClose:M,onSuccess:w},null,8,["show","initial-date","initial-resident-id","residents","schedule-types"]),u(I,{show:m.value,schedule:p.value,residents:g.value,"schedule-types":D.value,onClose:_,onUpdated:S,onDeleted:A},null,8,["show","schedule","residents","schedule-types"])]),_:1}))}},ue=O(Z,[["__scopeId","data-v-c9045a3f"]]);export{ue as default};

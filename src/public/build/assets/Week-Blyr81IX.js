import{l as O,r as a,q as T,h as E,c as F,w as j,o as B,a as i,u as x,m as R,b as l,W as u}from"./app-BGfmsnWH.js";import{A as $}from"./AuthenticatedLayout-CUiVAEbY.js";import{F as V,_ as G,a as I,i as N,b as U,l as q}from"./ScheduleModal-BSs6fQ5q.js";import{i as H}from"./index-D-dfTXd0.js";import{d as n}from"./dayjs.min-BfedqCIq.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BvExYBVO.js";import"./Footer-C77glWd_.js";import"./Modal-BcYjMljY.js";const z={class:"py-8 bg-gray-50 dark:bg-gray-900 min-h-screen"},J={class:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8"},K={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden"},P={class:"p-6"},Q={class:"calendar-container"},X={__name:"Week",setup(Z){n.locale("ja");const{props:o}=O(),s=a(o.events||[]),p=a(o.residents||[]),k=a(o.scheduleTypes||[]),y=a(o.currentDate||n().format("YYYY-MM-DD")),D=a(o.startOfWeek||n().startOf("week").add(1,"day").format("YYYY-MM-DD"));a(o.endOfWeek||n().endOf("week").add(1,"day").format("YYYY-MM-DD"));const r=a(null);T(()=>o.events,e=>{e&&(s.value=e,r.value&&r.value.getApi().refetchEvents())},{deep:!0});const d=a(!1),v=a(null),m=a(null),f=a(!1),h=a(null),Y=e=>{const t=n(e.start).format("YYYY-MM-DD"),c=n(D.value).format("YYYY-MM-DD");n(e.start).startOf("week").add(1,"day").format("YYYY-MM-DD")!==c&&u.get(route("calendar.week"),{date:t},{preserveState:!0,preserveScroll:!0})},_=e=>{var c;const t=(c=e.jsEvent)==null?void 0:c.target;t&&t.closest(".fc-event")||(v.value=n(e.date).format("YYYY-MM-DD"),m.value=null,d.value=!0)},w=e=>{d.value=!1,h.value=e.event,f.value=!0},M=E(()=>({plugins:[N,H,U],initialView:"timeGridWeek",locale:q,headerToolbar:{left:"prev,next today",center:"title",right:"customMonth,timeGridWeek,customDay"},customButtons:{customMonth:{text:"月",click:()=>{u.get(route("calendar.index"),{date:y.value})}},customDay:{text:"日",click:()=>{u.get(route("calendar.day"),{date:y.value})}}},buttonText:{today:"今日",month:"月",week:"週",day:"日"},events:s.value,eventDisplay:"block",height:"auto",editable:!1,selectable:!1,dateClick:_,eventClick:w,slotMinTime:"06:00:00",slotMaxTime:"22:00:00",slotDuration:"00:30:00",firstDay:1,allDaySlot:!1,dayHeaderFormat:{weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}})),b=e=>{console.log("handleScheduleCreated called (Week)",e),e&&(s.value=[...s.value,e],console.log("Added new event to events.value:",s.value.length),r.value&&r.value.getApi().refetchEvents())},S=()=>{d.value=!1,v.value=null,m.value=null},W=()=>{u.reload({only:["events"]})},A=e=>{console.log("handleScheduleDeleted called (Week)",e),g(),e&&(s.value=s.value.filter(t=>t.id!==e),console.log("Removed deleted event from events.value:",s.value.length),r.value&&r.value.getApi().refetchEvents())},g=()=>{f.value=!1,h.value=null};return(e,t)=>(B(),F($,null,{default:j(()=>[i(x(R),{title:"週間カレンダー"}),l("div",z,[l("div",J,[t[0]||(t[0]=l("div",{class:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4"},[l("div",null,[l("h1",{class:"text-3xl font-bold text-gray-800 dark:text-gray-100 tracking-tight"},"週間カレンダー"),l("p",{class:"text-gray-500 dark:text-gray-400 mt-1"},"週ごとのスケジュールを確認できます")])],-1)),l("div",K,[l("div",P,[l("div",Q,[i(x(V),{ref_key:"calendarRef",ref:r,options:M.value,onDatesSet:Y},null,8,["options"])])])])])]),i(G,{show:d.value,"initial-date":v.value,"initial-resident-id":m.value,residents:p.value,"schedule-types":k.value,onClose:S,onSuccess:b},null,8,["show","initial-date","initial-resident-id","residents","schedule-types"]),i(I,{show:f.value,schedule:h.value,residents:p.value,"schedule-types":k.value,onClose:g,onUpdated:W,onDeleted:A},null,8,["show","schedule","residents","schedule-types"])]),_:1}))}},ce=L(X,[["__scopeId","data-v-acb8fa45"]]);export{ce as default};

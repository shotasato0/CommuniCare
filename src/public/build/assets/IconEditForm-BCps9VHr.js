import{u as I,r as o,g as i,d as r,t as x,i as y,e as j,o as c,p as C}from"./app-oKiCCnFa.js";import{h as M}from"./imageHandler-DFZSy6p1.js";const E={class:"fixed inset-0 flex justify-center items-center z-50 bg-black/50 dark:bg-black/70"},S={class:"w-80 bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg relative"},U={key:0,class:"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-100 p-3 mb-6 rounded"},B={key:1,class:"bg-red-100 dark:bg-red-800 text-red-700 dark:text-red-200 p-3 mb-6 rounded"},F={class:"flex justify-center mb-4"},D=["src"],N={class:"mb-4"},V={class:"flex justify-between"},O={__name:"IconEditForm",props:{user:Object},emits:["close","updateIcon","successMessage"],setup(k,{emit:h}){const g=k,n=h,b=I({icon:null}),l=o(null),m=o(null),u=o(g.user.iconUrl||g.user.icon_url||"/images/default_user_icon.png"),a=o(null),s=o(null),_=e=>{M(e,l,m,s),l.value&&(b.icon=l.value,u.value=m.value)},w=()=>{b.post(route("profile.updateIcon"),{forceFormData:!0,onSuccess:()=>{var d,v,p,f;const e=C().props,t=((v=(d=e==null?void 0:e.auth)==null?void 0:d.user)==null?void 0:v.iconUrl)||((f=(p=e==null?void 0:e.auth)==null?void 0:p.user)==null?void 0:f.icon_url)||"/images/default_user_icon.png";u.value=t,n("updateIcon",t),n("successMessage","プロフィール画像が更新されました"),a.value="プロフィール画像が更新されました",setTimeout(()=>{a.value=null},8e3),n("close")},onError:e=>{e.icon?s.value=e.icon:s.value="プロフィール画像の更新に失敗しました"}})};return(e,t)=>(c(),i("div",E,[r("div",S,[a.value?(c(),i("div",U,x(a.value),1)):y("",!0),s.value?(c(),i("div",B,x(s.value),1)):y("",!0),t[3]||(t[3]=r("h1",{class:"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-gray-100"}," プロフィール画像編集 ",-1)),r("div",F,[r("img",{src:u.value,alt:"ユーザーのプロフィール写真",class:"w-24 h-24 rounded-full object-cover"},null,8,D)]),r("form",{onSubmit:j(w,["prevent"]),enctype:"multipart/form-data"},[r("div",N,[t[1]||(t[1]=r("label",{class:"block font-bold mb-2 text-gray-900 dark:text-gray-100",for:"icon"},"画像を選択",-1)),r("input",{type:"file",id:"icon",onChange:_,class:"w-full border border-gray-300 dark:border-gray-600 p-2 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"},null,32)]),r("div",V,[t[2]||(t[2]=r("button",{type:"submit",class:"w-32 px-4 py-2 bg-blue-100 dark:bg-blue-800 text-blue-700 dark:text-blue-300 rounded-md transition hover:bg-blue-300 dark:hover:bg-blue-600 hover:text-white text-center"}," 更新 ",-1)),r("button",{type:"button",onClick:t[0]||(t[0]=d=>e.$emit("close")),class:"w-32 px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md transition hover:bg-gray-500 dark:hover:bg-gray-500 hover:text-white text-center"}," キャンセル ")])],32)])]))}};export{O as default};
